<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>타이머</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0d0d0f;
      --surface: #18181b;
      --text: #fafafa;
      --text-muted: #71717a;
      --border: #27272a;
      --accent: #a78bfa;
      --accent-hover: #c4b5fd;
      --danger: #f87171;
      --success: #34d399;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 440px;
      margin: 0 auto;
    }

    h1 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 2rem;
    }

    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }

    .tab-btn {
      flex: 1;
      padding: 0.75rem 1rem;
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 500;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab-btn:hover {
      color: var(--text);
    }

    .tab-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .panel {
      display: none;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2.5rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }

    .panel.active {
      display: block;
    }

    .display {
      font-size: 3rem;
      font-weight: 600;
      font-variant-numeric: tabular-nums;
      text-align: center;
      margin-bottom: 2rem;
      letter-spacing: 0.05em;
    }

    .display.warning {
      color: var(--danger);
    }

    /* 스톱워치 버튼 */
    .stopwatch-btns {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
    }

    /* 카운트다운 입력 */
    .countdown-input-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }

    .time-input {
      width: 4rem;
      padding: 0.75rem;
      font-family: inherit;
      font-size: 1.25rem;
      text-align: center;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      outline: none;
      font-variant-numeric: tabular-nums;
    }

    .time-input:focus {
      border-color: var(--accent);
    }

    .time-sep {
      font-size: 1.5rem;
      color: var(--text-muted);
    }

    .countdown-btns {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
    }

    .btn {
      padding: 0.875rem 1.5rem;
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 500;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--accent-hover);
    }

    .btn-secondary {
      background: var(--bg);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      border-color: var(--text-muted);
    }

    .btn-danger {
      background: rgba(248, 113, 113, 0.2);
      color: var(--danger);
      border: 1px solid var(--danger);
    }

    .btn-danger:hover {
      background: rgba(248, 113, 113, 0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>타이머</h1>

    <div class="tabs">
      <button class="tab-btn active" data-tab="stopwatch">스톱워치</button>
      <button class="tab-btn" data-tab="countdown">카운트다운</button>
    </div>

    <!-- 스톱워치 -->
    <div class="panel active" id="stopwatch-panel">
      <div class="display" id="stopwatch-display">00:00:00.00</div>
      <div class="stopwatch-btns">
        <button class="btn btn-primary" id="stopwatch-start">시작</button>
        <button class="btn btn-secondary" id="stopwatch-pause" disabled>정지</button>
        <button class="btn btn-secondary" id="stopwatch-reset">초기화</button>
      </div>
    </div>

    <!-- 카운트다운 -->
    <div class="panel" id="countdown-panel">
      <div class="countdown-input-wrap">
        <input type="number" class="time-input" id="cd-min" placeholder="분" min="0" max="99" value="5">
        <span class="time-sep">:</span>
        <input type="number" class="time-input" id="cd-sec" placeholder="초" min="0" max="59" value="0">
      </div>
      <div class="display" id="countdown-display">05:00</div>
      <div class="countdown-btns">
        <button class="btn btn-primary" id="countdown-start">시작</button>
        <button class="btn btn-secondary" id="countdown-pause" disabled>정지</button>
        <button class="btn btn-danger" id="countdown-reset">초기화</button>
      </div>
    </div>
  </div>

  <script>
    // 탭 전환
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab + '-panel').classList.add('active');
      });
    });

    // 스톱워치
    const stopwatchDisplay = document.getElementById('stopwatch-display');
    const stopwatchStart = document.getElementById('stopwatch-start');
    const stopwatchPause = document.getElementById('stopwatch-pause');
    const stopwatchReset = document.getElementById('stopwatch-reset');

    let stopwatchTime = 0;
    let stopwatchInterval = null;
    let stopwatchRunning = false;

    function formatStopwatch(ms) {
      const h = Math.floor(ms / 3600000);
      const m = Math.floor((ms % 3600000) / 60000);
      const s = Math.floor((ms % 60000) / 1000);
      const cs = Math.floor((ms % 1000) / 10);
      return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}.${cs.toString().padStart(2, '0')}`;
    }

    stopwatchStart.addEventListener('click', () => {
      if (stopwatchRunning) return;
      stopwatchRunning = true;
      stopwatchStart.disabled = true;
      stopwatchPause.disabled = false;
      const startTime = Date.now() - stopwatchTime;
      stopwatchInterval = setInterval(() => {
        stopwatchTime = Date.now() - startTime;
        stopwatchDisplay.textContent = formatStopwatch(stopwatchTime);
      }, 10);
    });

    stopwatchPause.addEventListener('click', () => {
      if (!stopwatchRunning) return;
      stopwatchRunning = false;
      stopwatchStart.disabled = false;
      stopwatchPause.disabled = true;
      clearInterval(stopwatchInterval);
    });

    stopwatchReset.addEventListener('click', () => {
      stopwatchRunning = false;
      stopwatchTime = 0;
      stopwatchStart.disabled = false;
      stopwatchPause.disabled = true;
      clearInterval(stopwatchInterval);
      stopwatchDisplay.textContent = '00:00:00.00';
    });

    // 카운트다운
    const cdMin = document.getElementById('cd-min');
    const cdSec = document.getElementById('cd-sec');
    const countdownDisplay = document.getElementById('countdown-display');
    const countdownStart = document.getElementById('countdown-start');
    const countdownPause = document.getElementById('countdown-pause');
    const countdownReset = document.getElementById('countdown-reset');

    let countdownTime = 0;
    let countdownInterval = null;
    let countdownRunning = false;
    let countdownInputDisabled = false;

    function formatCountdown(ms) {
      const m = Math.floor(ms / 60000);
      const s = Math.floor((ms % 60000) / 1000);
      return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }

    function updateCountdownDisplay() {
      countdownDisplay.textContent = formatCountdown(countdownTime);
      countdownDisplay.classList.toggle('warning', countdownTime > 0 && countdownTime <= 10000);
    }

    function updateCountdownFromInput() {
      const min = parseInt(cdMin.value, 10) || 0;
      const sec = parseInt(cdSec.value, 10) || 0;
      countdownTime = (min * 60 + sec) * 1000;
      updateCountdownDisplay();
    }

    function syncInputFromTime() {
      const m = Math.floor(countdownTime / 60000);
      const s = Math.floor((countdownTime % 60000) / 1000);
      cdMin.value = m;
      cdSec.value = s;
    }

    cdMin.addEventListener('input', () => {
      if (!countdownInputDisabled) updateCountdownFromInput();
    });
    cdSec.addEventListener('input', () => {
      if (!countdownInputDisabled) updateCountdownFromInput();
    });

    countdownStart.addEventListener('click', () => {
      if (countdownRunning) return;
      if (countdownTime <= 0) {
        updateCountdownFromInput();
        if (countdownTime <= 0) return;
      }
      countdownRunning = true;
      countdownInputDisabled = true;
      cdMin.disabled = true;
      cdSec.disabled = true;
      countdownStart.disabled = true;
      countdownPause.disabled = false;

      const startTime = Date.now();
      const endTime = startTime + countdownTime;

      countdownInterval = setInterval(() => {
        countdownTime = Math.max(0, endTime - Date.now());
        updateCountdownDisplay();
        syncInputFromTime();

        if (countdownTime <= 0) {
          clearInterval(countdownInterval);
          countdownRunning = false;
          countdownInputDisabled = false;
          cdMin.disabled = false;
          cdSec.disabled = false;
          countdownStart.disabled = false;
          countdownPause.disabled = true;
        }
      }, 100);
    });

    countdownPause.addEventListener('click', () => {
      if (!countdownRunning) return;
      countdownRunning = false;
      countdownInputDisabled = false;
      cdMin.disabled = false;
      cdSec.disabled = false;
      countdownStart.disabled = false;
      countdownPause.disabled = true;
      clearInterval(countdownInterval);
      syncInputFromTime();
    });

    countdownReset.addEventListener('click', () => {
      countdownRunning = false;
      countdownInputDisabled = false;
      cdMin.disabled = false;
      cdSec.disabled = false;
      countdownStart.disabled = false;
      countdownPause.disabled = true;
      clearInterval(countdownInterval);
      cdMin.value = 5;
      cdSec.value = 0;
      countdownTime = 5 * 60 * 1000;
      updateCountdownDisplay();
    });

    updateCountdownFromInput();
  </script>
</body>
</html>
